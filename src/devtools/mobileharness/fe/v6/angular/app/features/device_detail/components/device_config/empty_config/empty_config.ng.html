<app-dialog title="Configure Device" subtitle="Device ID: {{ deviceId }}" deviceId="{{ deviceId }}">
  @if (hostMissing()) {
    <mat-dialog-content class="device-config-content">
      <div class="host-missing-container">
        <i class="material-icons warning-icon">warning_amber</i>
        <h3 class="host-missing-title">Host Configuration Not Found</h3>
        <p class="host-missing-content">
          The host for this device (<strong class="font-medium">{{ hostName }}</strong
          >) does not have a default configuration set up yet.
        </p>
        <a
          href="${link}"
          class="wizard-button wizard-button-primary"
          target="_blank"
          rel="noopener noreferrer"
        >
          <i class="material-icons open-in-new-icon">open_in_new</i>
          Configure Host
        </a>
      </div>
    </mat-dialog-content>
  } @else {
    <mat-dialog-content class="device-config-content">
      <div class="device-config-empty-container">
        <h3 class="empty-config-title">{{ title }}</h3>
        <div class="empty-config-grid">
          <button class="choice-card" (click)="startNewConfig()">
            <span mat-icon class="material-icons">add</span>
            <p class="choice-card-title">Create New Configuration</p>
          </button>
          <button class="choice-card" (click)="copyFromHost()">
            <span mat-icon class="material-icons">dns</span>
            <p class="choice-card-title">Copy from Host</p>
          </button>
          <button class="choice-card" (click)="copyFromAnotherDevice()">
            <span mat-icon class="material-icons">content_copy</span>
            <p class="choice-card-title">Copy from Another Device</p>
          </button>
        </div>
      </div>

      <!-- Copy from another device -->
      @if (copyFromAnother()) {
        <div class="copy-from-container">
          <label class="form-label">Enter source device UUID</label>
          <input
            matInput
            type="text"
            placeholder="e.g., 43021FDAQ000UM"
            class="form-input"
            [(ngModel)]="anotherDeviceUuid"
          />
          <button
            mat-button
            class="load-button wizard-button wizard-button-primary"
            (click)="loadAndReviewConfig()"
          >
            Load & Review Configuration
          </button>
          <p class="copy-error-message">
            {{ copyFromAnotherErrorMessage() }}
          </p>
        </div>
      }
    </mat-dialog-content>
  }
  <ng-container footer-buttons>
    <button mat-button mat-dialog-close class="wizard-button wizard-button-secondary">
      Cancel
    </button>
  </ng-container>
</app-dialog>
