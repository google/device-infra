/*
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

edition = "2023";

package mobileharness.api.deviceconfig;

import "src/devtools/mobileharness/api/deviceconfig/proto/device.proto";
import "src/devtools/mobileharness/api/deviceconfig/proto/project.proto";

option java_package = "com.google.devtools.mobileharness.api.deviceconfig.proto";
option java_outer_classname = "LabProjectConfigProto";

// DeviceConfigs associated by HardwareFingerprint to represent the equivalent
// to the DeviceConfigService.GetTenantConfig RPC, but available locally.
message TenantDeviceConfigList {
  // The list of device configs
  repeated TenantDeviceConfig tenant_device_config = 1;
}

// A single mapping between hardware fingerprint and device config.
message TenantDeviceConfig {
  // The device pool for this config. A pool is a subdivision of devices in the
  // tenant, for example, a lab may have separate "presubmit" and "postsubmit"
  // device pools. An empty pool represents a "wildcard" config which devices in
  // any pool may match.
  string pool = 3;
  // A device selector for the given device config.
  HardwareFingerprint hardware_fingerprint = 1;
  // The device config to apply to a matching device.
  // Supported and required dimensions specified here are merged with those from
  // the device config. When there are conflicts, the value(s) from this config
  // take precedence.
  DeviceConfig device_config = 2;
}
